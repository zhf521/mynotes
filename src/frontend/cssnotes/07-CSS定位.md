---
title: CSS定位
order: 7
---

## 为什么使用定位

1. 浮动可以让多个块级盒子一行没有缝隙排列显示，经常用于横向排列盒子
2. 定位则是可以让盒子自由的在某个盒子内移动位置或者固定屏幕中某个位置，并且可以压住其他盒子

## 定位组成

定位：将盒子定在某一个位置，所以**定位也是在摆放盒子，按照定位的方式移动盒子**

定位也是用来布局的，它有两部分组成：`定位 = 定位模式 + 边偏移`

**定位模式** 用于指定一个元素在文档中的定位方式

**边偏移**则决定了该元素的最终位置

### 边偏移（方位名词）

**边偏移** 就是定位的盒子移动到最终位置。有 top、bottom、left 和 right  4 个属性

| 边偏移属性    | 示例             | 描述                               |
| -------- | :------------- | -------------------------------- |
| `top`    | `top: 80px`    | **顶端**偏移量，定义元素相对于其父元素**上边线的距离** |
| `bottom` | `bottom: 80px` | **底部**偏移量，定义元素相对于其父元素**下边线的距离** |
| `left`   | `left: 80px`   | **左侧**偏移量，定义元素相对于其父元素**左边线的距离** |
| `right`  | `right: 80px`  | **右侧**偏移量，定义元素相对于其父元素**右边线的距离** |

定位的盒子有了边偏移才有价值。一般情况下，凡是有定位的地方必有边偏移

### 定位模式 (position)

在 CSS 中，通过 `position` 属性定义元素的**定位模式**，语法如下：
```css
选择器 { 
    position: 属性值; 
}
```

定位模式是有不同分类的，在不同情况下，我们用到不同的定位模式

定位模式决定元素的定位方式，它通过 CSS 的 position 属性来设置，其值可以分为四个：

| 值          |    语义    |
| ---------- | :------: |
| `static`   | **静态**定位 |
| `relative` | **相对**定位 |
| `absolute` | **绝对**定位 |
| `fixed`    | **固定**定位 |

## 定位模式介绍

### 静态定位 (static) 

- **静态定位**是元素的**默认**定位方式，**无定位的意思**，在不需要定位的时候用
- 语法：
  ```
  选择器 { 
      position: static; 
  }
  ```
- 静态定位按照标准流特性摆放位置，它没有边偏移
- 静态定位在布局时几乎不用

### 相对定位 (relative) 

- **相对定位**是元素在移动位置的时候，是相对于它自己**原来的位置**来说的
- 语法：
```
选择器 { 
	position: relative; 
}
```
- 相对定位的特点：（务必记住）
  - 它是相对于自己原来的位置来移动的（移动位置的时候参照点是自己原来的位置）
  + **原来**在标准流的**位置**继续占有，后面的盒子仍然以标准流的方式对待它，因此，**相对定位并没有脱标**

### 绝对定位 (absolute)

#### 绝对定位的介绍

- **绝对定位**是元素在移动位置的时候，是相对于它**祖先元素**来说的
- 语法：
  ```
   选择器 { 
   	position: absolute; 
   }
  ```
+ 绝对定位的特点：
	+ **完全脱标** —— 完全不占位置
	+ 如果没有祖先元素或者祖先元素没有定位，则以**浏览器**为准定位（Document 文档）
	+ 如果祖先元素有定位 (相对、绝对、固定定位)，则以最近一级的有定位祖先元素为参考点移动位置

#### 定位口诀 —— 子绝父相

==子级是绝对定位的话，父级要用相对定位==

+ 子级绝对定位，不会占有位置，可以放到父盒子里面的任何一个地方，不会影响其他的兄弟盒子
+ 父盒子需要加定位限制子盒子在父盒子内显示
+ 父盒子布局时，需要占有位置，因此父亲只能是相对定位

**父级要占有位置，子级要任意摆放**这就是子绝父相的由来，所以**相对定位经常用来作为绝对定位的父级**

总结： **因为父级需要占有位置，因此是相对定位， 子盒子不需要占有位置，则是绝对定位**

当然，子绝父相不是永远不变的，如果父元素不需要占有位置，**子绝父绝**也会遇到

### 固定定位 (fixed) 

- **固定定位**是元素**固定于浏览器可视区的位置**
- 主要使用场景：可以在浏览器页面滚动时元素的位置不会改变
- 语法：
  ```
   选择器 { 
   	position: fixed; 
   }
  ```
- 固定定位的特点：
	- 以浏览器的可视窗口为参照点移动元素
	- 跟父元素没有任何关系
	- 不随滚动条滚动
	- 固定定位**不再占有原先的位置**
	- 固定定位也是**脱标**的，其实**固定定位也可以看做是一种特殊的绝对定位**

### 粘性定位 (sticky) 

- **粘性定位**可以被认为是相对定位和固定定位的混合
- 语法：
  ```
   选择器 { 
       position: sticky; 
       top: 10px; 
   }
  
  ```
- 粘性定位的特点：
	- 以浏览器的可视窗口为参照点移动元素（固定定位特点）
	- 粘性定位占有原先的位置（相对定位特点）
	- 必须添加 top 、left、right、bottom **其中一个**才有效

### 定位模式总结

| **定位模式**          | **是否脱标**         | **移动位置**           | **是否常用**                 |
| --------------------- | -------------------- | ---------------------- | ---------------------------- |
| static   静态定位     | 否                   | 不能使用边偏移         | 很少                         |
| **relative 相对定位** | **否 (占有位置)**    | **相对于自身位置移动** | **基本单独使用**             |
| **absolute绝对定位**  | **是（不占有位置）** | **带有定位的父级**     | **要和定位父级元素搭配使用** |
| **fixed 固定定位**    | **是（不占有位置）** | **浏览器可视区**       | **单独使用，不需要父级**     |
| sticky 粘性定位       | 否   (占有位置)      | 浏览器可视区           | 当前阶段少                   |

注意：
1. **边偏移**需要和**定位模式**联合使用，**单独使用无效**
2. `top` 和 `bottom` 不要同时使用
3. `left` 和 `right` 不要同时使用

## 定位的应用

固定定位小技巧： 固定在版心右侧位置

小算法：
1. 让固定定位的盒子 `left: 50%;`，走到浏览器可视区（也可以看做版心）的一半位置
2. 让固定定位的盒子 `margin-left: 版心宽度的一半距离;` 多走版心宽度的一半位置
3. 就可以让固定定位的盒子**贴着版心右侧对齐**了

## 定位堆叠顺序 (z-index)

- 在使用**定位**布局时，可能会**出现盒子重叠的情况**，此时，可以使用 `z-index` 来控制盒子的前后次序 (z 轴)
- 语法：
  ```
  选择器 { 
  	z-index: 1; 
  }
  ```
- `z-index` 的特性如下：
	- 属性值：正整数、负整数或0，默认值是0，数值越大，盒子越靠上
	- 如果属性值相同，则按照书写顺序，后来者居上
	- 数字后面==不能加单位==

==注意：`z-index` 只能应用于相对定位、绝对定位和固定定位的元素，其他标准流、浮动和静态定位无效==

## 定位的拓展

### 绝对定位的盒子居中

注意：加了绝对定位/固定定位的盒子不能通过设置 `margin: auto` 设置水平居中，但是可以通过以下计算方法实现水平和垂直居中，可以按照下图的方法：

1. `left: 50%;` 让盒子的左侧移动到父级元素的水平中心位置
2. `margin-left: -x px;` 让盒子向左移动自身宽度的一半

### 定位特殊特性

绝对定位和固定定位也和浮动类似：
1. 行内元素添加绝对或者固定定位，可以直接设置高度和宽度
2. 块级元素添加绝对或者固定定位，如果不给宽度或者高度，默认大小是内容的大小

display 是显示模式，可以改变显示模式有以下方式:
+ 可以用 inline-block  转换为行内块
+ 可以用浮动 float 默认转换为行内块（类似，并不完全一样，因为浮动是脱标的）
+ 绝对定位和固定定位也和浮动类似，默认转换的特性转换为行内块

> 所以说，一个行内的盒子，如果加了浮动、固定定位和绝对定位，不用转换，就可以给这个盒子直接设置宽度和高度等

### 脱标的盒子不会触发外边距塌陷

浮动元素、绝对定位 (固定定位）元素的都不会触发外边距合并的问题

也就是说，我们给盒子改为了浮动或者定位，就不会有垂直外边距合并的问题

### 绝对定位 (固定定位)会完全压住盒子

浮动元素不同，只会压住它下面标准流的盒子，但是不会压住下面标准流盒子里面的文字，但是绝对定位（固定定位）会压住下面标准流所有的内容

浮动之所以不会压住文字，因为浮动产生的目的最初是为了做文字环绕效果的，文字会围绕浮动元素

## 精灵图

### 为什么需要精灵图

一个网页中往往会应用很多小的背景图像作为修饰，当网页中的图像过多时，服务器就会频繁地接收和发送请求图片，造成服务器请求压力过大，这将大大降低页面的加载速度

为了有效地减少服务器接收和发送请求的次数，提高页面的加载速度，出现了 CSS 精灵技术（也称 CSS Sprites、CSS 雪碧图）

核心原理：将网页中的一些小背景图像整合到一张大图中，这样服务器只需要一次请求就可以了

### 精灵图（sprites）的使用

使用精灵图核心：
1. 精灵技术主要针对于背景图片使用。就是把多个小背景图片整合到一张大图片中
2. 这个大图片也称为 sprites 精灵图或者雪碧图
3. 移动背景图片位置，此时可以使用 background-position
4. 移动的距离就是这个目标图片的 x 和 y 坐标。注意网页中的坐标有所不同
5. 因为一般情况下都是往上往左移动，所以数值是负值
6. 使用精灵图的时候需要精确测量，每个小背景图片的大小和位置

例：

效果：

![CSS定位01.png](https://obsidian-picture.oss-cn-qingdao.aliyuncs.com/my-img/CSS定位01.png)

精灵图：

![CSS定位02.jpg](https://obsidian-picture.oss-cn-qingdao.aliyuncs.com/my-img/CSS定位02.jpg)

结构：
```html
<span class="p">p</span>
<span class="i">i</span>
<span class="n">n</span>
<span class="k">k</span>
```
样式：
```css
span {
    display: inline-block;
    background: url(images/abcd.jpg) no-repeat;
}
.p {
    width: 100px;
    height: 112px;
    /* background-color: pink; */
    background-position:  -493px -276px;
}
.i {
    width: 60px;
    height: 108px;
    /* background-color: pink; */
    background-position: -327px -142px;
}
.n {
    width: 108px;
    height: 109px;
    /* background-color: pink; */
    background-position: -215px -141px;
}
.k {
    width: 105px;
    height: 114px;
    /* background-color: pink; */
    background-position: -495px -142px;
}
```

