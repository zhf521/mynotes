---
title: 小林coding计网-HTTP篇
order: 2
---

## 1. 常见面试题

### 1.1 HTTP是什么

HTTP 是超文本传输协议

HTTP 是一个在计算机世界里专门在「两点」之间「传输」文字、图片、音频、视频等「超文本」数据的「约定和规范」

### 1.2 HTTP常见状态码

+ `1xx`：提示信息，协议处理的一种中间状态，表示接收的请求正在处理
+ `2xx`：成功，服务器正常收到客户端的请求，并处理完毕
  + `200 OK` 是最常见的成功状态码，表示一切正常。如果是非 HEAD 请求，服务器返回的响应头都会有 body 数据
  + `204 No Content`与 200 OK 基本相同，但响应头没有 body 数据
  + `206 Partial Content` 应用于 HTTP 分块下载或断点续传，表示响应返回的 body 数据并不是资源的全部，而是其中的一部分
+ `3xx`：重定向，表示客户端请求的资源发送了变动，需要客户端用新的 URL 重新发送请求获取资源
  + `301 Moved Permanently`永久重定向，说明请求的资源已经不存在了，需改用新的 URL 再次访问
  + `302 Found`临时重定向，说明请求的资源还在，但暂时需要用另一个 URL 来访问
  + 301 和 302 都会在响应头里使用字段 Location，指明后续要跳转的 URL，浏览器会自动重定向新的 URL
  + `304 Not Modified`不具有跳转的含义，表示资源未修改，重定向已存在的缓冲文件，也称缓存重定向，也就是告诉客户端可以继续使用缓存资源，用于缓存控制
+ `4xx`：客户端错误，表示客户端发送的报文有误，服务器无法处理，也就是错误码的含义
  + `400 Bad Request`表示客户端请求的报文有错误，但只是个笼统的错误
  + `403 Forbidden`表示服务器禁止访问资源，并不是客户端的请求出错
  + `404 Not Found`表示请求的资源在服务器上不存在或未找到，所以无法提供给客户端
+ `5xx`：服务器错误，表示客户端请求报文正确，但是服务器处理时内部发生了错误
  + `500 Internal Server Error`与 400 类似，是个笼统通用的错误码，服务器发生了什么错误，我们并不知道
  + `501 Not Implemented`表示客户端请求的功能还不支持，类似“即将开业，敬请期待”的意思
  + `502 Bad Gateway`通常是服务器作为网关或代理时返回的错误码，表示服务器自身工作正常，访问后端服务器发生了错误
  + `503 Service Unavailable`表示服务器当前很忙，暂时无法响应服务器，类似“网络服务正忙，请稍后重试”的意思

### 1.3 HTTP常见字段

+ `Host `客户端发送请求时，用来指定服务器的域名
+ `Content-Length`服务器在返回数据时，会有 Content-Length 字段，表明本次回应的数据长度
+ `Connection` 最常用于客户端要求服务器使用 TCP 持久连接，以便其他请求复用。HTTP/1.1 版本的默认连接都是持久连接，但为了兼容老版本的 HTTP，需要指定 Connection 首部字段的值为 Keep-Alive
+ `Content-Type`服务器回应时，告诉客户端，本次数据是什么格式。客户端请求的时候，可以使用 `Accept`字段声明自己可以接受哪些数据格式
+ `Content-Encoding`表示服务器返回的数据使用了什么压缩格式。客户端在请求时，用 `Accept-Encoding`字段说明自己可以接受哪些压缩方法
+ `ETag`一种将资源以字符串形式做唯一性标识的方式，服务器为每份资源分配对应的ETag值；资源更新时候，ETag值也更新。例如：Google中英文网页的URI虽然相同但对应的ETag不同

### 1.4 GET和POST区别

**安全**：是指请求方法不会「破坏」服务器上的资源
**幂等**：多次执行相同的操作，结果都是「相同」的

| 方法         | `GET`                      | `POST`                                 |
| ------------ | -------------------------- | -------------------------------------- |
| 语义         | 请求获取指定的资源（只读） | 对指定的资源做出处理（新增或提交数据） |
| 安全性       | 安全、幂等                 | 不安全、不幂等                         |
| 缓存         | 可被缓存                   | 一般不会缓存                           |
| 请求数据位置 | 一般写在URL中              | 一般写在报文 body 中                   |

如果不照RFC规范定义的语义来实现的话， 上述都不一定

它们是 HTTP 请求协议的请求方法，而 HTTP 又是基于TCP/IP的关于数据如何在万维网中如何通信的协议，所以 GET/POST 实际上都是 TCP 链接

### 1.5 强制缓存和协商缓存

| 缓存技术 | 强制缓存                                                 | 协商缓存                                                     |
| -------- | -------------------------------------------------------- | ------------------------------------------------------------ |
| 特点     | 浏览器判断没过期，则使用缓存（浏览器主动）               | 状态码`304`，告知客户端是否可以使用缓存（与服务端协商）      |
| 字段     | `Cache-control`:相对时间（优先级高） `Expires`：绝对时间 | 请求`If-Modified-Since`和响应`Last-Modified`：如果在这个时间后更新了才接受 & 响应资源最后修改时间<br>请求`If-None-Match`和响应`ETag`：和ETag不一致的时候才接受（ETag优先级高） |
| 结果     | 如果最后修改时间较新，则返回最新资源 `200` 否则返回`304` | 如果资源变化了返回`200`，否则返回`304`                       |

### 1.6 HTTP1.1

**优点**：

1. 简单
2. 灵活易扩展（例如HTTPS和HTTP/3对TCP层的修改）
3. 应用广泛，跨平台

**缺点**：

1. 无状态——Cookie解决
2. 不安全
   - 明文传输 - 被**窃听**
   - 不验证通信方身份 - 被**冒充和伪装**
   - 不校验报文完整性 - 被**篡改**

和`HTTP1.0`相比的优势：

1. 长连接——减少重复操作的开销
2. 管道网络传输——不等回应即可发送第二个请求，减少响应时间
3. 队头阻塞 

### 1.7 HTTPS

HTTP的通信接口部分用SSL/TLS协议代替 == HTTPS（即HTTP + 加密 + 认证 + 完整性保护）

| 协议   | HTTP     | HTTPS                                                 |
| ------ | -------- | ----------------------------------------------------- |
| 安全性 | 明文传输 | TCP 和 HTTP 之间加入了 SSL/TLS 安全协议，加密传输报文 |
| 连接   | 三次握手 | 三次握手+SSL/TLS握手                                  |
| 端口号 | 80       | 443                                                   |

另外HTTPS需要向CA申请数字证书来确保服务器的身份

如何解决HTTP的安全问题：

- 明文传输产生的**窃听**问题——信息加密 `（混合加密）`
- 不验证身份产生的**冒充**问题——校验机制 `（证书）`
- 不校验完整性产生的**篡改**问题——身份证书 `（摘要算法）`

常见非对称加密算法：RSA、DSA、ECC、DH

常见对称加密算法：DES、3DES、AES、RC（记：RC或者ES结尾的是对称）

### 1.8 HTTP的演变

| 协议 | HTTP/1.1                                                     | HTTP/2                                                       | HTTP/3(QUIC的特点)                                           |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 改进 | 1.***长连接***<br>2.***管道运输***：一次发送多个请求 <br/>3.废弃了两种***请求方法***LINK和UNLINK，新增了CONNECT、OPTIONS和TRACE<br/>4.新增了大量状态码 | 1.头部压缩<br/>2.`二`进制格式 <br/>3.数据流：可以乱序发送，后stream ID组成HTTP信息 <br/>4.多路复用，串行变成并发<br/>5.服务器推送 | `TCP`->`UDP`+ `QUIC`<br/>1.无队头阻塞<br/>2.更快的连接建立（QUIC包含TLS，只需1个RTT）<br/>3.连接迁移 |
| 不足 | 1.**头部冗长**，未经压缩，浪费带宽，造成延迟<br/>2.没有请求优先级，所以**队头阻塞**(HTTP层) <br/>3.服务器只能被动接收客户端的请求 | TCP层队头阻塞 TCP和TLS握手时延                               | 普及慢，很多网络设备不识别QUIC                               |

![小林coeding计网-HTTP篇01.png](https://zhf-picture.oss-cn-qingdao.aliyuncs.com/my-img/小林coding计网-HTTP篇01.png)









